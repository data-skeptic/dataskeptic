<!DOCTYPE html> 
<html lang="en">
	<head>
		<meta charset="utf-8">
		<title>Sasquatch Footprints — How big are they?</title>

		<!-- jQuery -->
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
		<script type="text/javascript" src="jquery.ui.core.min.js"></script>
		<script type="text/javascript" src="jquery.ui.widget.min.js"></script>
		<script type="text/javascript" src="jquery.ui.mouse.min.js"></script>
		<script type="text/javascript" src="jquery.ui.draggable.min.js"></script>

		<!-- wColorPicker -->
		<link rel="Stylesheet" type="text/css" href="wColorPicker.css" />
		<script type="text/javascript" src="wColorPicker.js"></script>

		<!-- wPaint -->
		<link rel="Stylesheet" type="text/css" href="wPaint.css" />
		<script type="text/javascript" src="wPaint.js"></script>

		<!--  STYLE SHEETS  -->
		<link rel="stylesheet" type="text/css" href="bfStyles.css" />
	</head>
	
	<body>
		<div id="wrapper">
			<div id="content" class="cf">
				<header>
					<a href="/" alt="The Data Skeptic Podcast"><img src="DSlogo_white.png"></a>
					<h1>Sasquatch Footprints</h1>
				</header>
				<p>Whether he is called Sasquatch, Bigfoot, or any of a wide variety of names, the topic of Bigfoot is controversial &mdash; some have no doubt these creatures exists, others do not see enough evidence agree. Regardless of where you stand, one cannot deny that Bigfoot has had a significant place in our folklore and popular culture. </p>

				<p>We&#39;d like your help testing what people think is the average size of Bigfoot&#39;s footprint, relative to an average human&#39;s foot. Please draw a footprint in the space below that reflects the size you expect for a reported Bigfoot footprint.  There is no right answer, and feel free to adjust as much as you feel necessary.</p>

				<div id="menu">
					<table>
						<tr>
							<td align="center">
								<div id="wPaint"></div>
							</td>
							<td>
								<img id="canvasImage" src=""/>
							</td>
						</tr>
					</table>
				</div>	
				<div id="buttonHolder">
					<button class="butBase" id="clearBut" onclick='clearCanvas();'>Clear</button>
					<input class="butBase" id="subBut" type="button" value="Upload Image" onclick="upload_image('wPaint');"/>
				</div>
			</div>
		</div>
		<footer>
			<ul>
				<li><a href="/">DataSkeptic Podcast</a></li>
				<li><a href="../episodes.php">Show Notes</a></li>
				<li><a href="../blog.php">Blog</a></li>
				<li><a href="../resources.php">Resources</a></li>
				<li><a href="../contact.php">Contact</a></li>
			</ul>
		</footer>
		<script type="text/javascript">
			function dataURItoBlob(dataURI) {
			    // convert base64/URLEncoded data component to raw binary data held in a string
			    var byteString;
			    if (dataURI.split(',')[0].indexOf('base64') >= 0)
			        byteString = atob(dataURI.split(',')[1]);
			    else
			        byteString = unescape(dataURI.split(',')[1]);

			    // separate out the mime component
			    var mimeString = dataURI.split(',')[0].split(':')[1].split(';')[0];

			    // write the bytes of the string to a typed array
			    var ia = new Uint8Array(byteString.length);
			    for (var i = 0; i < byteString.length; i++) {
			        ia[i] = byteString.charCodeAt(i);
			    }
			    return new Blob([ia], {type:mimeString});
			}


			var wp = $("#wPaint").wPaint({
				strokeStyle: '#000000',
				drawDown: function(e, mode){ $("#canvasDown").val(this.settings.mode + ": " + e.pageX + ',' + e.pageY); },
				drawMove: function(e, mode){ $("#canvasMove").val(this.settings.mode + ": " + e.pageX + ',' + e.pageY); },
				drawUp: function(e, mode){ $("#canvasUp").val(this.settings.mode + ": " + e.pageX + ',' + e.pageY); }
			}).data('_wPaint');
				
			function saveImage() {
				var imageData = $("#wPaint").wPaint("image");
				$("#canvasImage").attr('src', imageData);
				$("#canvasImageData").val(imageData);
			}

			function clearCanvas() {
				$("#wPaint").wPaint("clear");
			}
				
			function upload_image(id) {
				var imageData = $("#" + id).wPaint("image");
				var blob = dataURItoBlob(imageData);
				var fd = new FormData();
				fd.append('file', blob);
				$.ajax({
					url: 'hello.py/post_img',
					type: 'POST',
					data: fd,
					async: false,
					cache: false,
					enctype: 'multipart/form-data',
					processData: false,
					contentType: false,
					success: function(data) {
						alert('Thanks for participating');
						clearCanvas();
					}
				});
			}

			$.extend($.fn.wPaint.defaults, {
			  mode:        'pencil',  // set mode
			  lineWidth:   '3',       // starting line width
			  fillStyle:   '#FFFFFF', // starting fill style
			  strokeStyle: '#000000'  // start stroke style
			});
		</script>
	</body>
</html>
